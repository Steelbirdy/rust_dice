WHITESPACE = _{ " " }

atom = { dice | number }
  number = { ("+" | "-")? ~ ("0" | ASCII_NONZERO_DIGIT ~ ASCII_DIGIT*) }
  dice = { number? ~ ^"d" ~ number }

binary_operator = _{ add | sub | mul | div }
  add = { "+" }
  sub = { "-" }
  mul = { "*" }
  div = { "/" }

expr = { term ~ (binary_operator ~ term)* }
  term = _{ atom | "(" ~ expr ~ ")" }

calculation = { SOI ~ expr ~ EOI }